{"ID":"b8dde710-f9ed-4bb3-b9ad-b1e4e7dbee16","VersionNumber":4,"Name":"SQL Config - Trace Flag 1117","Description":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<head>\r\n\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /><title>\r\n\t\t</title>\r\n\t\t<style type=\"text/css\">\r\n\t\t\t.cs2654AE3A{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 0pt}\r\n\t\t\t.csBEC5BAA2{color:#000000;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;}\r\n\t\t\t.cs6BD174F1{color:#000000;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;text-decoration: none;}\r\n\t\t\t.csC1A17A41{color:#0000FF;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;text-decoration: underline;}\r\n\t\t</style>\r\n\t</head>\r\n\t<body>\r\n\t\t<p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">This custom condition checks the SQL Server to verify that Tace Flag 1117 has been enabled globally for the instance, this Trace Flag is typically used in conjunction where TempDb has multiple files.</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">&nbsp;</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">Trace Flag 1117 changes the default behaviour of SQL Server so that in the event of an Auto-growth event, where a file group has more than one file, that all of the files will grow. This is opposed to each file growing independently as each fills. It is important to ensure that all of the files in a file group start at the same size, have the same growth increments and then grow at the same time. This preserves the ability of SQL Server to use its proportional fill algorithm to allocate data equally into the files.</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">&nbsp;</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">More information on Trace Flag 1117 can be found at the following links;</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\"><a class=\"cs6BD174F1\" href=\"http://blogs.technet.com/technet_blog_images/b/sql_server_sizing_ha_and_performance_hints/archive/2012/02/09/sql-server-2008-trace-flag-t-1117.aspx\"><span class=\"csC1A17A41\">http://blogs.technet.com/technet_blog_images/b/sql_server_sizing_ha_and_performance_hints/archive/2012/02/09/sql-server-2008-trace-flag-t-1117.aspx</span></a></span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\"><a class=\"cs6BD174F1\" href=\"https://support.microsoft.com/en-us/kb/2154845\"><span class=\"csC1A17A41\">https://support.microsoft.com/en-us/kb/2154845</span></a></span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\"><a class=\"cs6BD174F1\" href=\"http://www.sqlskills.com/blogs/paul/tempdb-configuration-survey-results-and-advice/\"><span class=\"csC1A17A41\">http://www.sqlskills.com/blogs/paul/tempdb-configuration-survey-results-and-advice/</span></a></span><span class=\"csBEC5BAA2\"> </span></p></body>\r\n</html>\r\n","AppliesToObjectTypeID":"0a11a887-823a-4461-87af-321cad1c3623","ConditionCategoryID":"805a84c9-7f1b-4b4d-a9ad-3dddcf9e0f17","OwnerObjectID":"b7c74f24-1a45-4115-8262-d7613878bbd6","OwnerObjectTypeID":"894de672-3fc0-4779-9a0d-880d4c207c77","RuleDefinition":"{\"OperationTypeID\":\"6c3d38f1-9317-4258-972a-cfee0a0d76b5\",\"Children\":[{\"OperationTypeID\":\"8fa3cd6a-960c-43bb-96e0-94092fc2c296\",\"ValueDataTypeID\":\"5fc935ac-e954-413e-b9ec-a27b8403aefe\",\"Left\":{\"ValueTypeID\":\"aa61ee90-8a95-4fdf-a208-b9a4afa26d9d\",\"Database\":\"master\",\"Query\":\"declare @default table(flag sysname)\\r\\ninsert into @default\\r\\n\\tvalues(N'1117')\\r\\n;\\r\\n\\r\\ndeclare @results table(name sysname, status smallint, global bit, session bit);\\r\\n\\r\\ndeclare @sqlStmt nvarchar(max) = N'dbcc tracestatus(-1)';\\r\\n\\r\\ninsert into @results\\r\\nexec sp_executesql @stmt = @sqlStmt\\r\\n;\\r\\n\\r\\nselect \\r\\n\\tcase\\r\\n\\t\\twhen isnull(status,0) = 1 and isnull(global,0) = 1\\r\\n\\t\\t\\tthen cast(1 as  bit)\\r\\n\\t\\telse cast(0 as bit)\\r\\n\\tend as flagSet\\r\\nfrom @results as r\\r\\nright outer join @default as d on r.name = d.flag\\r\\n;\\r\\n\\r\\n\",\"InstanceType\":0},\"ComparisonType\":1,\"Right\":{\"ValueTypeID\":\"07f87b7f-c063-47a2-a5be-772ba85ed827\",\"Value\":\"True\"},\"ID\":\"1\"}],\"BooleanOperationType\":0,\"ID\":\"0\"}","EvaluationFrequency":"01:00:00","IdlePeriod":"00:00:00","MaximumAllowedDuration":"00:00:05","AntiConditionID":"621e7a52-df56-4dc3-99db-963c44950367","MinWindowsVersion":null,"MaxWindowsVersion":null,"MinSQLServerVersion":null,"MaxSQLServerVersion":null,"MinSSASVersion":null,"MaxSSASVersion":null,"MinVmwareVersion":null,"MaxVmwareVersion":null,"MinSqlDbVersion":null,"MaxSqlDbVersion":null,"MaximumInstanceCount":1,"ColorIndicator":-11305551,"Severity":1,"Signature":{"ConditionID":"b8dde710-f9ed-4bb3-b9ad-b1e4e7dbee16","VersionNumber":4,"AppliesToObjectTypeID":"0a11a887-823a-4461-87af-321cad1c3623","RuleDefinition":"{\"OperationTypeID\":\"6c3d38f1-9317-4258-972a-cfee0a0d76b5\",\"Children\":[{\"OperationTypeID\":\"8fa3cd6a-960c-43bb-96e0-94092fc2c296\",\"ValueDataTypeID\":\"5fc935ac-e954-413e-b9ec-a27b8403aefe\",\"Left\":{\"ValueTypeID\":\"aa61ee90-8a95-4fdf-a208-b9a4afa26d9d\",\"Database\":\"master\",\"Query\":\"declare @default table(flag sysname)\\r\\ninsert into @default\\r\\n\\tvalues(N'1117')\\r\\n;\\r\\n\\r\\ndeclare @results table(name sysname, status smallint, global bit, session bit);\\r\\n\\r\\ndeclare @sqlStmt nvarchar(max) = N'dbcc tracestatus(-1)';\\r\\n\\r\\ninsert into @results\\r\\nexec sp_executesql @stmt = @sqlStmt\\r\\n;\\r\\n\\r\\nselect \\r\\n\\tcase\\r\\n\\t\\twhen isnull(status,0) = 1 and isnull(global,0) = 1\\r\\n\\t\\t\\tthen cast(1 as  bit)\\r\\n\\t\\telse cast(0 as bit)\\r\\n\\tend as flagSet\\r\\nfrom @results as r\\r\\nright outer join @default as d on r.name = d.flag\\r\\n;\\r\\n\\r\\n\",\"InstanceType\":0},\"ComparisonType\":1,\"Right\":{\"ValueTypeID\":\"07f87b7f-c063-47a2-a5be-772ba85ed827\",\"Value\":\"True\"},\"ID\":\"1\"}],\"BooleanOperationType\":0,\"ID\":\"0\"}","PublisherID":0,"PublishDateUtc":"2016-12-20T20:37:05","Rights":0,"SignatureVersion":1,"SignaturePublicKey":"<RSAKeyValue><Modulus>uzJQ9gzevXFwOgw/hkcAtD+cA/bBbD1PRzhEZCxbZ6YwjJ1c9bbfXFItLQNwnm8bdWh2k57//qbpEj5DFHOW2EAjHc2Zw5m/vACm6OzelubPS5hbWvzshlaBJKm7KrpWQpPZClx/5eVvUVzOtlz+44RRTiOszObT58acJAQwA70=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue>","Signature":"l1c1its5PFD8tyW3+Mviu4+g2F2PivtlcrsS7Gcix7dRH0WaJsZKCbhM7sAjBELvRpVUGVO4PRfMF/mvyfdmwU3BES63EAbRMKuuGpnnZppb+M6edY1LptjwywCaDW1Hw88hFYpO4dYsVs6YIsXZTDSwMdfhRuRKO0/Yu5XbyNo=","IsSelfPublishedCondition":true},"Tags":null,"Areas":["SQL Server: Pages"],"ConditionSystemVersion":3,"MinDBSchemaVersion":null,"MaxDBSchemaVersion":null,"Items":[]}