{"ID":"471d23b1-630a-420c-8d13-7645c82528f1","VersionNumber":0,"Name":"SF - Tempdb Large Version Store and Generation Rate exceeds Cleanup Rate","Description":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<head>\r\n\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /><title>\r\n\t\t</title>\r\n\t\t<style type=\"text/css\">\r\n\t\t\t.cs2654AE3A{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 0pt}\r\n\t\t\t.csBEC5BAA2{color:#000000;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;}\r\n\t\t</style>\r\n\t</head>\r\n\t<body>\r\n\t\t<p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">This is a prototype alarm to warn when the Tempdb version store cleanup rate dips significantly below the Version Store Generation Rate at a time when the version store is already using a large amount of space.</span></p></body>\r\n</html>\r\n","AppliesToObjectTypeID":"0a11a887-823a-4461-87af-321cad1c3623","ConditionCategoryID":"805a84c9-7f1b-4b4d-a9ad-3dddcf9e0f17","OwnerObjectID":"b7c74f24-1a45-4115-8262-d7613878bbd6","OwnerObjectTypeID":"894de672-3fc0-4779-9a0d-880d4c207c77","RuleDefinition":"{\"OperationTypeID\":\"6c3d38f1-9317-4258-972a-cfee0a0d76b5\",\"Children\":[{\"OperationTypeID\":\"8fa3cd6a-960c-43bb-96e0-94092fc2c296\",\"ValueDataTypeID\":\"b35a57f5-b8f6-4e4e-9380-e9d328e3eabf\",\"Left\":{\"ValueTypeID\":\"bd31f3db-a9ba-45fe-a076-9b5f4a386ff0\",\"OriginLCID\":9,\"CategoryName\":\"SQLServer:Transactions\",\"CategoryNameLocalized\":null,\"CounterName\":\"Version Cleanup rate (KB/s)\",\"CounterNameLocalized\":null,\"InstanceType\":null,\"InstanceName\":null},\"ComparisonType\":4,\"Right\":{\"ValueTypeID\":\"2c6a4447-6aae-4a3f-94ec-854e5658775e\",\"Left\":{\"ValueTypeID\":\"bd31f3db-a9ba-45fe-a076-9b5f4a386ff0\",\"OriginLCID\":9,\"CategoryName\":\"SQLServer:Transactions\",\"CategoryNameLocalized\":null,\"CounterName\":\"Version Generation rate (KB/s)\",\"CounterNameLocalized\":null,\"InstanceType\":null,\"InstanceName\":null},\"ArithmeticCompoundValueOperationType\":2,\"Right\":{\"ValueTypeID\":\"07f87b7f-c063-47a2-a5be-772ba85ed827\",\"Value\":\"1.5\"}},\"ID\":\"1\"},{\"OperationTypeID\":\"281290ef-d1a9-47f0-a49d-7dd82a5f3a3f\",\"DynamicConditionID\":\"b772ddc7-48c3-44e5-94ea-7b0c75a6b764\",\"ID\":\"2\"}],\"BooleanOperationType\":0,\"ID\":\"0\"}","EvaluationFrequency":"00:00:30","IdlePeriod":"00:00:30","MaximumAllowedDuration":"00:00:05","AntiConditionID":"10823c0e-3d2b-440b-b494-48282927cfdd","MinWindowsVersion":null,"MaxWindowsVersion":null,"MinSQLServerVersion":null,"MaxSQLServerVersion":null,"MinSSASVersion":null,"MaxSSASVersion":null,"MinVmwareVersion":null,"MaxVmwareVersion":null,"MinSqlDbVersion":null,"MaxSqlDbVersion":null,"MaximumInstanceCount":1,"ColorIndicator":null,"Severity":1,"Signature":{"ConditionID":"471d23b1-630a-420c-8d13-7645c82528f1","VersionNumber":0,"AppliesToObjectTypeID":"0a11a887-823a-4461-87af-321cad1c3623","RuleDefinition":"{\"OperationTypeID\":\"6c3d38f1-9317-4258-972a-cfee0a0d76b5\",\"Children\":[{\"OperationTypeID\":\"8fa3cd6a-960c-43bb-96e0-94092fc2c296\",\"ValueDataTypeID\":\"b35a57f5-b8f6-4e4e-9380-e9d328e3eabf\",\"Left\":{\"ValueTypeID\":\"bd31f3db-a9ba-45fe-a076-9b5f4a386ff0\",\"OriginLCID\":9,\"CategoryName\":\"SQLServer:Transactions\",\"CategoryNameLocalized\":null,\"CounterName\":\"Version Cleanup rate (KB/s)\",\"CounterNameLocalized\":null,\"InstanceType\":null,\"InstanceName\":null},\"ComparisonType\":4,\"Right\":{\"ValueTypeID\":\"2c6a4447-6aae-4a3f-94ec-854e5658775e\",\"Left\":{\"ValueTypeID\":\"bd31f3db-a9ba-45fe-a076-9b5f4a386ff0\",\"OriginLCID\":9,\"CategoryName\":\"SQLServer:Transactions\",\"CategoryNameLocalized\":null,\"CounterName\":\"Version Generation rate (KB/s)\",\"CounterNameLocalized\":null,\"InstanceType\":null,\"InstanceName\":null},\"ArithmeticCompoundValueOperationType\":2,\"Right\":{\"ValueTypeID\":\"07f87b7f-c063-47a2-a5be-772ba85ed827\",\"Value\":\"1.5\"}},\"ID\":\"1\"},{\"OperationTypeID\":\"281290ef-d1a9-47f0-a49d-7dd82a5f3a3f\",\"DynamicConditionID\":\"b772ddc7-48c3-44e5-94ea-7b0c75a6b764\",\"ID\":\"2\"}],\"BooleanOperationType\":0,\"ID\":\"0\"}","PublisherID":0,"PublishDateUtc":"2019-04-24T19:26:18","Rights":0,"SignatureVersion":1,"SignaturePublicKey":"<RSAKeyValue><Modulus>uzJQ9gzevXFwOgw/hkcAtD+cA/bBbD1PRzhEZCxbZ6YwjJ1c9bbfXFItLQNwnm8bdWh2k57//qbpEj5DFHOW2EAjHc2Zw5m/vACm6OzelubPS5hbWvzshlaBJKm7KrpWQpPZClx/5eVvUVzOtlz+44RRTiOszObT58acJAQwA70=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue>","Signature":"jf9Q9bf5APeDCu9vIqmhtwBmsHJSPFZ4OR8R3KN6RYDcgX1MSMgQST7uyP7q8cHjA9RUa+6EILxwgS5Dwlc3QQFoeVjB73WhJKjijhNPv5AZZvvtBWomOqXbOSR1tZUVMgzHiaeak/lB2eXlLpD0cKF0LYcDCtR4Ad1U5GdW61M=","IsSelfPublishedCondition":true},"Tags":"TempDB","Areas":[],"ConditionSystemVersion":3,"MinDBSchemaVersion":null,"MaxDBSchemaVersion":null,"Items":[{"ID":"b772ddc7-48c3-44e5-94ea-7b0c75a6b764","VersionNumber":0,"Name":"Tempdb Large Version Store","Description":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<head>\r\n\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /><title>\r\n\t\t</title>\r\n\t\t<style type=\"text/css\">\r\n\t\t\t.cs2654AE3A{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 0pt}\r\n\t\t\t.csBEC5BAA2{color:#000000;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;}\r\n\t\t\t.csF6EF92FE{color:#000000;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:bold;font-style:normal;}\r\n\t\t\t.cs6BD174F1{color:#000000;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;text-decoration: none;}\r\n\t\t\t.csC1A17A41{color:#0000FF;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;text-decoration: underline;}\r\n\t\t</style>\r\n\t</head>\r\n\t<body>\r\n\t\t<p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">Evaluates to True when the tempdb version store is greater than 100,000 KB. </span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">&nbsp;</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">When snapshot isolation is in use, this can be an indicator that open transactions are preventing cleanup of the version store. The store is managed at the instance level, so an open transaction in one database will prevent cleanup for all databases.</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">&nbsp;</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">To find open transactions, run DBCC OPENTRAN or query the sys.dm_tran_xxx dmvs.</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\">&nbsp;</span></p><p class=\"cs2654AE3A\"><span class=\"csF6EF92FE\">See Also:</span></p><p class=\"cs2654AE3A\"><span class=\"csBEC5BAA2\"><a class=\"cs6BD174F1\" href=\"http://www.brentozar.com/archive/2013/01/implementing-snapshot-or-read-committed-snapshot-isolation-in-sql-server-a-guide/\"><span class=\"csC1A17A41\">http://www.brentozar.com/archive/2013/01/implementing-snapshot-or-read-committed-snapshot-isolation-in-sql-server-a-guide/</span></a></span></p></body>\r\n</html>\r\n","AppliesToObjectTypeID":"0a11a887-823a-4461-87af-321cad1c3623","ConditionCategoryID":"805a84c9-7f1b-4b4d-a9ad-3dddcf9e0f17","OwnerObjectID":"b7c74f24-1a45-4115-8262-d7613878bbd6","OwnerObjectTypeID":"894de672-3fc0-4779-9a0d-880d4c207c77","RuleDefinition":"{\"OperationTypeID\":\"6c3d38f1-9317-4258-972a-cfee0a0d76b5\",\"Children\":[{\"OperationTypeID\":\"8fa3cd6a-960c-43bb-96e0-94092fc2c296\",\"ValueDataTypeID\":\"b35a57f5-b8f6-4e4e-9380-e9d328e3eabf\",\"Left\":{\"ValueTypeID\":\"bd31f3db-a9ba-45fe-a076-9b5f4a386ff0\",\"OriginLCID\":9,\"CategoryName\":\"SQLServer:Transactions\",\"CategoryNameLocalized\":null,\"CounterName\":\"Version Store Size (KB)\",\"CounterNameLocalized\":null,\"InstanceType\":null,\"InstanceName\":null},\"ComparisonType\":2,\"Right\":{\"ValueTypeID\":\"07f87b7f-c063-47a2-a5be-772ba85ed827\",\"Value\":\"100000\"},\"ID\":\"1\"}],\"BooleanOperationType\":0,\"ID\":\"0\"}","EvaluationFrequency":"00:01:00","IdlePeriod":"00:00:00","MaximumAllowedDuration":"00:00:05","AntiConditionID":"7b2fd9e6-48b4-46b5-8d43-86d966ec677b","MinWindowsVersion":null,"MaxWindowsVersion":null,"MinSQLServerVersion":"9.0","MaxSQLServerVersion":null,"MinSSASVersion":null,"MaxSSASVersion":null,"MinVmwareVersion":null,"MaxVmwareVersion":null,"MinSqlDbVersion":null,"MaxSqlDbVersion":null,"MaximumInstanceCount":1,"ColorIndicator":null,"Severity":1,"Signature":{"ConditionID":"b772ddc7-48c3-44e5-94ea-7b0c75a6b764","VersionNumber":0,"AppliesToObjectTypeID":"0a11a887-823a-4461-87af-321cad1c3623","RuleDefinition":"{\"OperationTypeID\":\"6c3d38f1-9317-4258-972a-cfee0a0d76b5\",\"Children\":[{\"OperationTypeID\":\"8fa3cd6a-960c-43bb-96e0-94092fc2c296\",\"ValueDataTypeID\":\"b35a57f5-b8f6-4e4e-9380-e9d328e3eabf\",\"Left\":{\"ValueTypeID\":\"bd31f3db-a9ba-45fe-a076-9b5f4a386ff0\",\"OriginLCID\":9,\"CategoryName\":\"SQLServer:Transactions\",\"CategoryNameLocalized\":null,\"CounterName\":\"Version Store Size (KB)\",\"CounterNameLocalized\":null,\"InstanceType\":null,\"InstanceName\":null},\"ComparisonType\":2,\"Right\":{\"ValueTypeID\":\"07f87b7f-c063-47a2-a5be-772ba85ed827\",\"Value\":\"100000\"},\"ID\":\"1\"}],\"BooleanOperationType\":0,\"ID\":\"0\"}","PublisherID":1,"PublishDateUtc":"2017-10-12T18:52:24","Rights":0,"SignatureVersion":1,"SignaturePublicKey":"<RSAKeyValue><Modulus>5CMUf4g862KHGbkOQmp0RSpW+78ypdCkxK9WcfjqWpwbuS45O3NyMw+hVLcIY9opQtEoz0WDf6EKtIopoE4IBViBBfqZjcGzx6aJp4C/W4EXLzZiu4amXXp/S2faowTYDyejn/cepC4juPyjMuM7yd87XxtiZKGoM7f3xao4/Kc=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue>","Signature":"xTbzge/wHd6d5cbYkRAatupVTZ6FuiDX59xzuS/RbMiVy8LKgjZZ+Zsyd857fSUZJuci65TvB2hTvBebV2GjDFAaFv/g1jLethAqnlFG9AAyzyuDbPpf6EZCrm5rJT//fbTosso6bTaavdZqApf23xuastKxr35nkCAmbn1EAF0=","IsSelfPublishedCondition":false},"Tags":"TempDB,S1-Stock AC Pack","Areas":["SQL Server: Pages"],"ConditionSystemVersion":3,"MinDBSchemaVersion":null,"MaxDBSchemaVersion":null,"Items":[]}]}